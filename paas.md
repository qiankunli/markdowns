## docker review

我们从paas这个大概念下来理解docker的小概念。

paas，对于运维人员来说，就是将管理的内容从一系列的硬件物理机（装系统，zabbix监控等）转换为维护一个pass平台正常运行。对于开发来说，部署，从一个通知运维的过程（比较大的项目，或许还要写一个文档，盯着运维一起干），变成了自己到pass平台上提交等。

docker有以下特性特别适合干这个事

1. 代码和环境相结合，以image的形式存在。代码通过docker registry + docker pull的形式，在各个host中流动

2. 以容器的方式运行。其实你细看下公司tomcat的配置，大多数时候每个项目一个tomcat，tomcat配置最大jvm内存等，也是以容器的方式存在并运行。而容器的管理与监控，要比直接管理（增删改查）和监控一个tomcat进程方便。

## 网络知识的重新梳理

我们将网络世界的物理设备抽象为三种：计算节点，交换节点和路由节点

1. 因为计算节点不能两两相连，所以我们需要一个交换节点，负责**转发数据**。在数据链路层范围内

	a. 计算节点在发送数据的时候，**应用程序中**不可能直接写目的主机的mac地址，所以我们需要一个虚拟地址，即ip地址。arp请求（广播）及arp缓存。
    b. 交换节点收到一个包，在转发这个包的时候，没有mac地址与端口的映射，会先广播，然后建立mac地址与串口的映射关系。
    
2. 因为一个交换节点负责不了世界上的所有计算节点，（不然广播域也太大了），所以我们需要一个路由节点。

	a. 计算节点在发送数据时，通过**ip+掩码**来判断目的计算节点是否在一个子网内。当发现不在一个子网时，它会将数据包发送给子网内的路由节点（也就是网关）。
    b. 路由器根据路由表中的策略来接收和发送包。**这就不能叫转发了**，因为路由器会修改数据包。路由表中的rule可以静态设置，也可以动态学习。
    
通过这一段要修正自己以前的几个误区。

1. 实际上，计算节点通过交换节点向路由节点发送数据，交换节点转发包（不会修改）可以理解为透明。所以是：`计算节点 ==》交换接点 （透明）==》 路由节点 ==》 交换接点 （透明）==》计算节点 `实现跨网络传输
2. ip地址在数据链路层也会用到，而不只是网络层以上。
3. 计算节点的广播（arp），交换节点的广播，路由节点的广播（RIP路由协议）。广播有的时候是为了请求信息，有点时候是为了通知。

mac地址在同一个广播域传输过程中是不变的，在跨越广播域的时候会发生改变的；而IP地址在传输过程中是不会改变的（除NAT的时候）。